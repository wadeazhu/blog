<!doctype html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.8" />
    <meta name="theme" content="VuePress Theme Hope 2.0.0-rc.26" />
    <style>
      html {
        background: var(--bg-color, #fff);
      }

      html[data-theme="dark"] {
        background: var(--bg-color, #1d1e1f);
      }

      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <title>前端学习</title><meta name="description" content="vuepress-theme-hope 的文档演示">
    <link rel="preload" href="/blog/assets/style-saWzNP0k.css" as="style"><link rel="stylesheet" href="/blog/assets/style-saWzNP0k.css">
    <link rel="modulepreload" href="/blog/assets/app-D1MQ9M-Q.js"><link rel="modulepreload" href="/blog/assets/vue.html-_uoJqqbk.js"><link rel="modulepreload" href="/blog/assets/plugin-vue_export-helper-DlAUqK2U.js">
    <link rel="prefetch" href="/blog/assets/index.html-BHPkyLmu.js" as="script"><link rel="prefetch" href="/blog/assets/yingwendanci.html-BKmCPH_f.js" as="script"><link rel="prefetch" href="/blog/assets/yunyingshuoming.html-BT40SpQk.js" as="script"><link rel="prefetch" href="/blog/assets/cong0dao1kaifayigenpmbao.html-D35vTm69.js" as="script"><link rel="prefetch" href="/blog/assets/mokuaihua.html-eVxrMabj.js" as="script"><link rel="prefetch" href="/blog/assets/babel.html-CuISzT5k.js" as="script"><link rel="prefetch" href="/blog/assets/babelyushehechajianjieshao.html-l7DpmJ8d.js" as="script"><link rel="prefetch" href="/blog/assets/eslint.html-mokHN9Pk.js" as="script"><link rel="prefetch" href="/blog/assets/git.html-BE-iIq-7.js" as="script"><link rel="prefetch" href="/blog/assets/biaodanbiaoqian.html-bINDK3nx.js" as="script"><link rel="prefetch" href="/blog/assets/biaogebiaoqian.html-DYDsL7hr.js" as="script"><link rel="prefetch" href="/blog/assets/bujubiaoqian.html-B8-ybapx.js" as="script"><link rel="prefetch" href="/blog/assets/duomeitibiaoqian.html-X2cH-dKt.js" as="script"><link rel="prefetch" href="/blog/assets/fudong.html-suSBhxX6.js" as="script"><link rel="prefetch" href="/blog/assets/htmldejichuzhishi.html-CobFozqJ.js" as="script"><link rel="prefetch" href="/blog/assets/jueduidingwei.html-DhRhX_kw.js" as="script"><link rel="prefetch" href="/blog/assets/lianjiebiaoqian.html-Bg8IND4J.js" as="script"><link rel="prefetch" href="/blog/assets/liebiaobiaoqian.html-BHMGqhqr.js" as="script"><link rel="prefetch" href="/blog/assets/lujing.html-CKX7eTJd.js" as="script"><link rel="prefetch" href="/blog/assets/qita.html-BWOHwM23.js" as="script"><link rel="prefetch" href="/blog/assets/yuyihuabiaoqian.html-DeT7mBDZ.js" as="script"><link rel="prefetch" href="/blog/assets/zifushiti.html-CLORlJUd.js" as="script"><link rel="prefetch" href="/blog/assets/uni-app.html-DqKlFnlE.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-D8DHvXwq.js" as="script"><link rel="prefetch" href="/blog/assets/fuwenbenbianji.html-DGs2py3T.js" as="script"><link rel="prefetch" href="/blog/assets/shangchuan.html-C7EQQDj0.js" as="script"><link rel="prefetch" href="/blog/assets/ruhexiehaoyifenjianli.html-HKHVexUe.js" as="script"><link rel="prefetch" href="/blog/assets/chaye.html-BJ5d4uaH.js" as="script"><link rel="prefetch" href="/blog/assets/01.html-CnM1q0Wl.js" as="script"><link rel="prefetch" href="/blog/assets/changyongdexiaoyan.html-DsxwGQtH.js" as="script"><link rel="prefetch" href="/blog/assets/echartbiaoge.html-CQAaL7P7.js" as="script"><link rel="prefetch" href="/blog/assets/shuziluansheng.html-Dp2zFRPC.js" as="script"><link rel="prefetch" href="/blog/assets/uni-appchangjiangongnengdeshixian.html-BW3PaYEh.js" as="script"><link rel="prefetch" href="/blog/assets/1.jiegou.html-s62g7zTM.js" as="script"><link rel="prefetch" href="/blog/assets/2.rukouwenjian.html-gq1WWP_B.js" as="script"><link rel="prefetch" href="/blog/assets/3.store.html-CA5FHQ6Q.js" as="script"><link rel="prefetch" href="/blog/assets/4.luyou.html-6V1gV7B6.js" as="script"><link rel="prefetch" href="/blog/assets/5.fengzhuangtongyongqingqiu.html-CYfxDqPq.js" as="script"><link rel="prefetch" href="/blog/assets/6.peizhiwenjian.html-CnFoHaKw.js" as="script"><link rel="prefetch" href="/blog/assets/7.luyoushouwei.html-BOtJPvOt.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DiyONLlk.js" as="script"><link rel="prefetch" href="/blog/assets/gongjufangfa.html-Cm6O4vg0.js" as="script"><link rel="prefetch" href="/blog/assets/daiwancheng.html-BNfCi0yd.js" as="script"><link rel="prefetch" href="/blog/assets/10yue.html-DGcSevVA.js" as="script"><link rel="prefetch" href="/blog/assets/11yue.html-He0Ye3cR.js" as="script"><link rel="prefetch" href="/blog/assets/12yue.html-DTxmiRaS.js" as="script"><link rel="prefetch" href="/blog/assets/1yue.html-Dk51BUF5.js" as="script"><link rel="prefetch" href="/blog/assets/2yue.html-D7JFhCBb.js" as="script"><link rel="prefetch" href="/blog/assets/3yue.html-D-uXfeRY.js" as="script"><link rel="prefetch" href="/blog/assets/4yue.html-CDkHqtlF.js" as="script"><link rel="prefetch" href="/blog/assets/5yue.html-DsQvupAb.js" as="script"><link rel="prefetch" href="/blog/assets/6yue.html-DgIT4q6i.js" as="script"><link rel="prefetch" href="/blog/assets/7yue.html-MmfES0Gr.js" as="script"><link rel="prefetch" href="/blog/assets/8yue.html-Dw82iXao.js" as="script"><link rel="prefetch" href="/blog/assets/9yue.html-Dx6iZCue.js" as="script"><link rel="prefetch" href="/blog/assets/10yue.html-CmkVErSL.js" as="script"><link rel="prefetch" href="/blog/assets/11yue.html-BSCCtu5_.js" as="script"><link rel="prefetch" href="/blog/assets/12yue.html-DakPpBUn.js" as="script"><link rel="prefetch" href="/blog/assets/3yue.html-BPVnt9W3.js" as="script"><link rel="prefetch" href="/blog/assets/4yue.html-Bi4H0uji.js" as="script"><link rel="prefetch" href="/blog/assets/5yue.html-CS2lvUJi.js" as="script"><link rel="prefetch" href="/blog/assets/6yue.html-BS6tGkes.js" as="script"><link rel="prefetch" href="/blog/assets/7yue.html-D7ODGlxO.js" as="script"><link rel="prefetch" href="/blog/assets/8yue.html-B9LguJFk.js" as="script"><link rel="prefetch" href="/blog/assets/9yue.html-xHx-M5rN.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-BfZ_cm2E.js" as="script"><link rel="prefetch" href="/blog/assets/photoswipe.esm-SzV8tJDW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">跳至主要內容</a><!--]--><div class="theme-container no-navbar has-toc"><!----><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="route-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/blog/mianshi/mianshiti/vue.html" aria-label="/mianshi/mianshiti/vue.html"><!---->/mianshi/mianshiti/vue.html<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#vue基础" aria-label="vue基础"><!---->vue基础<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#vue的基本原理" aria-label="vue的基本原理"><!---->vue的基本原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#vue3-0" aria-label="Vue3.0"><!---->Vue3.0<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_1-vue3有什么更新" aria-label="1. vue3有什么更新"><!---->1. vue3有什么更新<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_2-defineproperty和proxy的区别" aria-label="2. defineProperty和proxy的区别"><!---->2. defineProperty和proxy的区别<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_3-vue3为什么要用proxy" aria-label="3. vue3为什么要用proxy？"><!---->3. vue3为什么要用proxy？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_4-如果理解vue3中的vue-composition-api" aria-label="4. 如果理解vue3中的vue composition Api？"><!---->4. 如果理解vue3中的vue composition Api？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_5-componsition-api与react-hook很像-区别是什么" aria-label="5. Componsition Api与React Hook很像， 区别是什么？"><!---->5. Componsition Api与React Hook很像， 区别是什么？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#虚拟dom" aria-label="虚拟DOM"><!---->虚拟DOM<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_1-对虚拟dom的理解" aria-label="1. 对虚拟DOM的理解？"><!---->1. 对虚拟DOM的理解？<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_2-虚拟dom的解析过程" aria-label="2.虚拟dom的解析过程"><!---->2.虚拟dom的解析过程<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_3-diff算法的原理" aria-label="3.diff算法的原理"><!---->3.diff算法的原理<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_4-vue中key的作用" aria-label="4.vue中key的作用"><!---->4.vue中key的作用<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="route-link nav-link vp-sidebar-link vp-heading" href="/blog/mianshi/mianshiti/vue.html#_5-为什么不建议用index作为key" aria-label="5. 为什么不建议用index作为key"><!---->5. 为什么不建议用index作为key<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!--[--><!----><!--]--><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><!----></h1><div class="page-info"><span class="page-author-info" aria-label="作者🖊" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Mr.Zhu</span></span><span property="author" content="Mr.Zhu"></span></span><!----><span class="page-date-info" aria-label="写作日期📅" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2024-03-01T03:25:03.000Z"></span><!----><span class="page-reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 9 分钟</span><meta property="timeRequired" content="PT9M"></span><!----><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">此页内容<button type="button" class="print-button" title="打印"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/blog/#vue基础">vue基础</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#vue的基本原理">vue的基本原理</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/blog/#vue3-0">Vue3.0</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_1-vue3有什么更新">1. vue3有什么更新</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_2-defineproperty和proxy的区别">2. defineProperty和proxy的区别</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_3-vue3为什么要用proxy">3. vue3为什么要用proxy？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_4-如果理解vue3中的vue-composition-api">4. 如果理解vue3中的vue composition Api？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_5-componsition-api与react-hook很像-区别是什么">5. Componsition Api与React Hook很像， 区别是什么？</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level2" href="/blog/#虚拟dom">虚拟DOM</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_1-对虚拟dom的理解">1. 对虚拟DOM的理解？</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_2-虚拟dom的解析过程">2.虚拟dom的解析过程</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_3-diff算法的原理">3.diff算法的原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_4-vue中key的作用">4.vue中key的作用</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="route-link toc-link level3" href="/blog/#_5-为什么不建议用index作为key">5. 为什么不建议用index作为key</a></li><!----><!--]--></ul></li><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!--[--><!----><!--]--><div class="theme-hope-content"><h2 id="vue基础" tabindex="-1"><a class="header-anchor" href="#vue基础"><span>vue基础</span></a></h2><h3 id="vue的基本原理" tabindex="-1"><a class="header-anchor" href="#vue的基本原理"><span>vue的基本原理</span></a></h3><p>当一个vue实例创建时，vue会遍历data中的属性，用Object.defineProperty(vue3使用proxy)将它们转为getter/setter，并且在内部追踪相关依赖，在属性被访问和修改时通知变化。每个组件实例都有相应的watcher程序实例，它会在组件渲染的过程中把属性记录为依赖，之后当依赖项的setter被调用时，会通知watcher重新计算，从而导致它关联的组件得以更新。</p><h2 id="vue3-0" tabindex="-1"><a class="header-anchor" href="#vue3-0"><span>Vue3.0</span></a></h2><h3 id="_1-vue3有什么更新" tabindex="-1"><a class="header-anchor" href="#_1-vue3有什么更新"><span>1. vue3有什么更新</span></a></h3><ol><li>检测机制的改变</li></ol><ul><li>vue3带来了基于proxy的observer实现，提供全语言覆盖的反应性跟踪</li><li>消除了vue2当中基于object.defineProperty来实现所存在的很多限制： <ol><li>检测属性的添加和删除</li><li>检测数组索引和长度的变更</li><li>支持Map，set，weakMap和weakSet</li></ol></li></ul><ol start="2"><li>模板</li></ol><ul><li>作用域插槽，2.x 的机制导致作用域插槽变了，父组件会重新渲染，而 3.0 把作用域插槽改成了函数的方式，这样只会影响子组件的重新渲染，提升了渲染的性能。</li><li>同时，对于 render 函数的方面，vue3.0 也会进行一系列更改来方便习惯直接使用 api 来生成 vdom 。</li></ul><ol start="3"><li>对象式的组件声明方式</li></ol><ul><li>vue2.x 中的组件是通过声明的方式传入一系列 option，和 TypeScript 的结合需要通过一些装饰器的方式来做，虽然能实现功能，但是比较麻烦。</li><li>3.0 修改了组件的声明方式，改成了类式的写法，这样使得和 TypeScript 的结合变得很容易</li></ul><ol start="4"><li>其他方面的更改</li></ol><ul><li>支持自定义渲染器，从而使得 weex 可以通过自定义渲染器的方式来扩展，而不是直接 fork 源码来改的方式。</li><li>支持 Fragment（多个根节点）和 Protal（在 dom 其他部分渲染组建内容）组件，针对一些特殊的场景做了处理。</li><li>基于 tree shaking 优化，提供了更多的内置功能。</li></ul><h3 id="_2-defineproperty和proxy的区别" tabindex="-1"><a class="header-anchor" href="#_2-defineproperty和proxy的区别"><span>2. defineProperty和proxy的区别</span></a></h3><p>Vue 在实例初始化时遍历 data 中的所有属性，并使用 Object.defineProperty 把这些属性全部转为 getter/setter。这样当追踪数据发生变化时，setter 会被自动调用。</p><p>Object.defineProperty 是 ES5 中一个无法 shim 的特性，这也就是 Vue 不支持 IE8 以及更低版本浏览器的原因。</p><p>但是这样做有以下问题：</p><ol><li>添加或删除对象的属性时，Vue 检测不到。因为添加或删除的对象没有在初始化进行响应式处理，只能通过<code>$set</code> 来调用<code>Object.defineProperty()</code>处理。</li><li>无法监控到数组下标和长度的变化。</li></ol><p>Vue3 使用 Proxy 来监控数据的变化。Proxy 是 ES6 中提供的功能，其作用为：用于定义基本操作的自定义行为（如属性查找，赋值，枚举，函数调用等）。相对于<code>Object.defineProperty()</code>，其有以下特点：</p><ol><li>Proxy 直接代理整个对象而非对象属性，这样只需做一层代理就可以监听同级结构下的所有属性变化，包括新增属性和删除属性。</li><li>Proxy 可以监听数组的变化。</li></ol><h3 id="_3-vue3为什么要用proxy" tabindex="-1"><a class="header-anchor" href="#_3-vue3为什么要用proxy"><span>3. vue3为什么要用proxy？</span></a></h3><p>在vue2中， Object.defineProperty会改变原始数据，而proxy时创建对象的虚拟表示，并提供set，get和deleteProperty等处理器，这些处理器可在访问或修改原始对象的属性时进行拦截， 有以下特点：</p><ul><li>不需要使用vue.$set或vue.$delete触法响应式。</li><li>全方位的数组变化检测，消除了vue2无效的边界情况。</li><li>支持Map，Set，WeakMap和Weak Set。</li></ul><p>Proxy实现的响应式原理和vue2的实现原理基本相同：</p><ul><li>get收集依赖</li><li>set、delete等触法依赖</li><li>对于集合类型，就是对结合对象的方法做一层包装：原方法执行后执行依赖相关的收集或触发逻辑。</li></ul><h3 id="_4-如果理解vue3中的vue-composition-api" tabindex="-1"><a class="header-anchor" href="#_4-如果理解vue3中的vue-composition-api"><span>4. 如果理解vue3中的vue composition Api？</span></a></h3><p>在 Vue2 中，代码是 Options API 风格的，也就是通过填充 (option) data、methods、computed 等属性来完成一个 Vue 组件。这种风格使得 Vue 相对于 React极为容易上手，同时也造成了几个问题：</p><ol><li>由于 Options API 不够灵活的开发方式，使得Vue开发缺乏优雅的方法来在组件间共用代码。</li><li>Vue 组件过于依赖<code>this</code>上下文，Vue 背后的一些小技巧使得 Vue 组件的开发看起来与 JavaScript 的开发原则相悖，比如在<code>methods</code> 中的<code>this</code>竟然指向组件实例来不指向<code>methods</code>所在的对象。这也使得 TypeScript 在Vue2 中很不好用。</li></ol><p>于是在 Vue3 中，舍弃了 Options API，转而投向 Composition API。Composition API本质上是将 Options API 背后的机制暴露给用户直接使用，这样用户就拥有了更多的灵活性，也使得 Vue3 更适合于 TypeScript 结合。</p><h3 id="_5-componsition-api与react-hook很像-区别是什么" tabindex="-1"><a class="header-anchor" href="#_5-componsition-api与react-hook很像-区别是什么"><span>5. Componsition Api与React Hook很像， 区别是什么？</span></a></h3><p>从React Hook的实现角度看，React Hook是根据useState调用的顺序来确定下一次重渲染时的state是来源于哪个useState，所以出现了以下限制</p><ul><li>不能在循环、条件、嵌套函数中调用Hook</li><li>必须确保总是在你的React函数的顶层调用Hook</li><li>useEffect、useMemo等函数必须手动确定依赖关系</li></ul><p>而Composition API是基于Vue的响应式系统实现的，与React Hook的相比</p><ul><li>声明在setup函数内，一次组件实例化只调用一次setup，而React Hook每次重渲染都需要调用Hook，使得React的GC比Vue更有压力，性能也相对于Vue来说也较慢</li><li>Compositon API的调用不需要顾虑调用顺序，也可以在循环、条件、嵌套函数中使用</li><li>响应式系统自动实现了依赖收集，进而组件的部分的性能优化由Vue内部自己完成，而React Hook需要手动传入依赖，而且必须必须保证依赖的顺序，让useEffect、useMemo等函数正确的捕获依赖变量，否则会由于依赖不正确使得组件性能下降。</li></ul><p>虽然Compositon API看起来比React Hook好用，但是其设计思想也是借鉴React Hook的。</p><h2 id="虚拟dom" tabindex="-1"><a class="header-anchor" href="#虚拟dom"><span>虚拟DOM</span></a></h2><h3 id="_1-对虚拟dom的理解" tabindex="-1"><a class="header-anchor" href="#_1-对虚拟dom的理解"><span>1. 对虚拟DOM的理解？</span></a></h3><ol><li><p>从本质上讲，虚拟DOM是对DOM结构的抽象，是一个JS的对象，将页面的状态抽象成js对象后再配合不同的渲染工具，使得跨平台成为可能。 比如node中就没有dom，如果要实现ssr，必须借助虚拟dom来完成。</p></li><li><p>在代码渲染到页面之前，vue会将代码转换成一个对象（虚拟DOM），以对象的形式来描述一个真实的DOM结构，最终渲染到页面上。在每次数据发生变化前，虚拟DOM都会缓存一份，变化的时候，会对比现在的虚拟DOM和换成的虚拟DOM做一个对比。在vue内部封装了一个diff算法，通过这个算法来进行比较。渲染时修改改变的变化， 原先没有发生改变的通过原先的数据进行渲染。</p></li><li><p>通过事务的处理机制，将多次DOM修改的结果一次性更新到页面上，从而有效的减少页面的渲染次数，减少了DOM的重绘重排次数，提高渲染性能。</p></li><li><p>保证性能下限，在不进行手动优化的情况下，提供过得去的性能。但是不一定比真实的dom性能要好。比如：首次渲染大量的dom时，由于多了一层虚拟的dom计算，会比innerHTML插入慢。</p></li></ol><h3 id="_2-虚拟dom的解析过程" tabindex="-1"><a class="header-anchor" href="#_2-虚拟dom的解析过程"><span>2.虚拟dom的解析过程</span></a></h3><ol><li>首先对需要插入的DOM树用js对象来表示，比如一个元素对象，包含了tagName，props，children这些属性，然后将这个用js对象来保存下来，最后再将dom片段插入到文档中。</li><li>当页面的状态发生改变需要对页面的dom结构进行调整的时候，首先构建起一颗对象树，然后将这颗新的对象树和旧的对象树进行比较，记录两棵树的差异</li><li>最后将记录有差异的地方运用到真正的dom树中去，这样视图就更新了。</li></ol><h3 id="_3-diff算法的原理" tabindex="-1"><a class="header-anchor" href="#_3-diff算法的原理"><span>3.diff算法的原理</span></a></h3><p>在新老虚拟dom对比时：</p><ul><li>首先判断是否是同一个节点，如果不是同一个节点，那么就删除改节点重新创建新节点进行替换</li><li>如果是相同的节点，进行patchNode，再对该节点的子节点进行处理 <ul><li>如果都有子节点，进行updateChildren，判断如何对该新老节点的子节点进行操作（diff核心）</li><li>如果一个有子节点，一个没有字节点（如果新的children没有子节点，将旧的子节点移除）</li></ul></li><li>匹配时，找到相同的子节点，递归比较子节点</li></ul><p>在diff中，只对同层的子节点进行比较，放弃跨级的节点比较，使得时间复杂度从O(n3)降低值O(n)，也就是说，只有当新旧children都为多个子节点时才需要用核心的diff算法进行同级别比较</p><h3 id="_4-vue中key的作用" tabindex="-1"><a class="header-anchor" href="#_4-vue中key的作用"><span>4.vue中key的作用</span></a></h3><p>key是为vue中vnode的唯一标记，通过这个key，diff操作可以更准确、更快速</p><ul><li>更准确：因为带key就不是就地复用了，在sameNode函数中a.key===b.key对比中就可以避免就地复用的情况。所以会更加准确</li><li>更快速：利用key的唯一性生成map对象来获取对应的节点，比遍历方式更快</li></ul><p>vue中的key分为两种情况来考虑：</p><ol><li>v-if中，由于vue会尽可能高效的渲染元素，通常会复用已有元素而不是从头开始渲染。因此当使用v-if来实现元素切换的时候，如果切换前后含有相同的元素，那么这个元素就会被复用。如果是相同的input元素，那么切换前后用户输入不会被清除掉，这样是不符合需求的。因此可以通过使用key来标识一个元素，这种情况下，使用key的元素不会被复用。这个时候key的作用是用来表示一个独立的元素。</li><li>v-for中，用v-for更新已渲染的元素列表时，它会默认使用“就地复用”的策略。如果数据项发生变化，vue不会移动dom元素来匹配数据项的顺序，而是简单高效复用此处的每个元素。因此通过为每个列表项提供一个key值，来以便vue跟踪元素的身份，从而高效的实现复用。这个时候key的作用是为了高效的更新渲染虚拟dom。</li></ol><h3 id="_5-为什么不建议用index作为key" tabindex="-1"><a class="header-anchor" href="#_5-为什么不建议用index作为key"><span>5. 为什么不建议用index作为key</span></a></h3><p>使用index作为key和基本没写没什么区别，以为不管数组的顺序怎么颠倒，index都是0，1，2.。。这样排列，导致vue会复用作为的旧子节点，做很多额外的工作。</p></div><!--[--><!----><!--]--><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">上次编辑于: </span><!----></div><div class="contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: zhuqi">zhuqi</span><!--]--><!--]--></div></div></footer><!----><!----><!--[--><!----><!--]--><!--]--></main><!--]--><!----></div><!--]--><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/blog/assets/app-D1MQ9M-Q.js" defer></script>
  </body>
</html>
