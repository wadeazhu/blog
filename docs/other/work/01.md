---
title: 工作中遇到的问题总结
---



1、发布时出现发布错误，查看文件发现是编码的问题，因为webstorm设置了项目的编码，与线上的编码不一样导致的

2、h5中，视频不能自动播放，这是因为浏览器的机制，必须有用户的操作才能开声音自动播放，否则只能静音播放

3、h5监听微信右上角三个点的触发。这里需要调用js的sdk， **还未解决**

4、安装包的时候报错， **还未解决**

![image-20230222112318590](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230222112318590.png)



5、安装包没有问题，但是运行出现了问题

![image-20230222112435633](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230222112435633.png)

这个是由于import 导入组件出了问题，需要改成下面的写法

```js
component: () => import("@/views/${this.compName}.vue") // 不能这么写

component: resove => require([`@/views/${this.compName}.vue`], resolve)  // 要这么写
```

6、公共组件开发的时候，特别是筛选框的组件，要考虑多选、单选

7、小程序发布流程

第一步：

用webstorm打包运行命令

```bash
npm run build:mp-weixin
```

打包完成之后，去微信公众平台找到微信appid,打开目录到`dist/build/mp-weixin`

![image-20230228174848663](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230228174848663.png)

第二步：点击上传

![image-20230228174926801](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230228174926801.png)

第三步：进入微信公众平台

![image-20230228175036349](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230228175036349.png)

先选为体验版，给测试，然后点击提交审核，审核通过后，切换成成线上版本就可以。

第四步： 发布到生产环境之后，如果遇到接口会访问不了，需要配置一下开发管理的服务器域名

![image-20230302095917359](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230302095917359.png)

![image-20230302095954468](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230302095954468.png)

7、git提交报错

![image-20230226231642435](https://azhu-images.oss-cn-hangzhou.aliyuncs.com/img-for-marktext/image-20230226231642435.png)

8、图片引入问题

js中的图片： require('@/assets/images/....')

css中的图片： url("~@/assets/images/....")

html中的图片： 



9、less 循环

```less
.setmp(@n,@i:0) when(@i<@n){
  .p@{i} {padding:unit(@i,px);}
  .ml@{i} {
    margin-left:unit(@i,px);
  }
  .mr@{i} {
    margin-right:unit(@i,px);
  }
  .setmp(@n,(@i+1));
}
```

10、画一个透明渐变的圆环

```html
<canvas width="94" height="94"></canvas>

<script>
	const $canvas = document.querySelector('canvas')
    const ctx = $canvas.getContext("2d")
    const length = 60
    const end = 2 * Math.PI * 0.3

    for (let i = 1 ; i <= length; i++) {
        ctx.save()
        if (i === length) ctx.lineCap = 'round'
        ctx.strokeStyle = `RGBA(31, 126, 255, ${(1 / length) * i})`
        ctx.lineWidth = 8
        ctx.beginPath()
        ctx.arc(47, 47, 43, -Math.PI / 2 + (end / length) * (i - 1) ,  -Math.PI / 2 + (end / length) * i)
        ctx.stroke()
        ctx.closePath()
        ctx.restore()
    }
</script>
```

uni-app

```html
<template>
	<canvas :canvas-id="type"></canvas>
</template>


<script>
	export default {
        methods: {
            init() {
              const ctx =uni.createCanvasContext(this.type, this)
              const height = document.body.clientHeight
              const length = 150 * this.num / 100 * 2
              const end = 2 * Math.PI * this.num / 100
              for (let i = 1 ; i <= length; i++) {
                ctx.save()
                if (i === length) ctx.lineCap = 'round'
                ctx.strokeStyle = `rgba(31, 126, 255, ${(1 / length) * i})`
                ctx.lineWidth = 7.5 *height / 1080
                ctx.beginPath()
                ctx.arc(47 *height / 1080, 47 *height / 1080, 43 *height / 1080, -Math.PI / 2 + (end / length) * (i - 1),  -Math.PI / 2 + (end / length) * i)
                ctx.stroke()
                ctx.closePath()
                ctx.restore()
              }
              ctx.draw()
            }
        }
    }
</script>
```

